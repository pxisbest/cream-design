import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{r as M,R as v}from"./iframe-BufI18ru.js";import{c as k}from"./index-DKS16l0K.js";import{I as ie,i as oe}from"./index-BvNO0jCf.js";import{P as O}from"./index-ulGwxc5f.js";import"./index-9GiLUT0o.js";const $=M.createContext({index:" 0"}),y=n=>{const{className:i,mode:u="horizontal",style:e,defaultIndex:s="0",onSelect:t,children:a,defaultOpenSubMenus:r=[]}=n,[o,l]=M.useState(s),d=k("cream-menu",i,{"menu-vertical":u==="vertical","menu-horizontal":u!=="vertical"}),h={index:o||"0",onSelect:S=>{l(S),t&&t(S)},mode:u,defaultOpenSubMenus:r},N=()=>v.Children.map(a,(S,D)=>{const m=S;if(m.type&&(m.type.displayName==="MenuItem"||m.type.displayName==="SubMenu"))return v.cloneElement(m,{index:D.toString()});console.log("warning: Menu has a child which is not a MenuItem component")});return c.jsx("ul",{className:d,style:e,"data-testid":"test-menu",children:c.jsx($.Provider,{value:h,children:N()})})};y.__docgenInfo={description:"",methods:[],displayName:"Menu",props:{defaultIndex:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},mode:{required:!1,tsType:{name:"union",raw:'"horizontal" | "vertical"',elements:[{name:"literal",value:'"horizontal"'},{name:"literal",value:'"vertical"'}]},description:""},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedIndex: string) => void",signature:{arguments:[{type:{name:"string"},name:"selectedIndex"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},defaultOpenSubMenus:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};const f=n=>{const{index:i,className:u,disabled:e,style:s,children:t}=n,a=M.useContext($),r=k("menu-item",u,{"is-disabled":e,"is-active":a.index===i}),o=()=>{a.onSelect&&!e&&typeof i=="string"&&a.onSelect(i)};return c.jsx("li",{className:r,style:s,"data-index":i,onClick:o,children:t})};f.displayName="MenuItem";f.__docgenInfo={description:"",methods:[],displayName:"MenuItem"};function z(){return z=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var u=arguments[i];for(var e in u)({}).hasOwnProperty.call(u,e)&&(n[e]=u[e])}return n},z.apply(null,arguments)}function Z(n,i){if(n==null)return{};var u={};for(var e in n)if({}.hasOwnProperty.call(n,e)){if(i.indexOf(e)!==-1)continue;u[e]=n[e]}return u}function q(n,i){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(u,e){return u.__proto__=e,u},q(n,i)}function ee(n,i){n.prototype=Object.create(i.prototype),n.prototype.constructor=n,q(n,i)}function ue(n,i){return n.classList?!!i&&n.classList.contains(i):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+i+" ")!==-1}function le(n,i){n.classList?n.classList.add(i):ue(n,i)||(typeof n.className=="string"?n.className=n.className+" "+i:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+i))}function U(n,i){return n.replace(new RegExp("(^|\\s)"+i+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ce(n,i){n.classList?n.classList.remove(i):typeof n.className=="string"?n.className=U(n.className,i):n.setAttribute("class",U(n.className&&n.className.baseVal||"",i))}const G={disabled:!1},te=v.createContext(null);var ne=function(i){return i.scrollTop},T="unmounted",E="exited",g="entering",b="entered",P="exiting",x=function(n){ee(i,n);function i(e,s){var t;t=n.call(this,e,s)||this;var a=s,r=a&&!a.isMounting?e.enter:e.appear,o;return t.appearStatus=null,e.in?r?(o=E,t.appearStatus=g):o=b:e.unmountOnExit||e.mountOnEnter?o=T:o=E,t.state={status:o},t.nextCallback=null,t}i.getDerivedStateFromProps=function(s,t){var a=s.in;return a&&t.status===T?{status:E}:null};var u=i.prototype;return u.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},u.componentDidUpdate=function(s){var t=null;if(s!==this.props){var a=this.state.status;this.props.in?a!==g&&a!==b&&(t=g):(a===g||a===b)&&(t=P)}this.updateStatus(!1,t)},u.componentWillUnmount=function(){this.cancelNextCallback()},u.getTimeouts=function(){var s=this.props.timeout,t,a,r;return t=a=r=s,s!=null&&typeof s!="number"&&(t=s.exit,a=s.enter,r=s.appear!==void 0?s.appear:a),{exit:t,enter:a,appear:r}},u.updateStatus=function(s,t){if(s===void 0&&(s=!1),t!==null)if(this.cancelNextCallback(),t===g){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:O.findDOMNode(this);a&&ne(a)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===E&&this.setState({status:T})},u.performEnter=function(s){var t=this,a=this.props.enter,r=this.context?this.context.isMounting:s,o=this.props.nodeRef?[r]:[O.findDOMNode(this),r],l=o[0],d=o[1],p=this.getTimeouts(),h=r?p.appear:p.enter;if(!s&&!a||G.disabled){this.safeSetState({status:b},function(){t.props.onEntered(l)});return}this.props.onEnter(l,d),this.safeSetState({status:g},function(){t.props.onEntering(l,d),t.onTransitionEnd(h,function(){t.safeSetState({status:b},function(){t.props.onEntered(l,d)})})})},u.performExit=function(){var s=this,t=this.props.exit,a=this.getTimeouts(),r=this.props.nodeRef?void 0:O.findDOMNode(this);if(!t||G.disabled){this.safeSetState({status:E},function(){s.props.onExited(r)});return}this.props.onExit(r),this.safeSetState({status:P},function(){s.props.onExiting(r),s.onTransitionEnd(a.exit,function(){s.safeSetState({status:E},function(){s.props.onExited(r)})})})},u.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},u.safeSetState=function(s,t){t=this.setNextCallback(t),this.setState(s,t)},u.setNextCallback=function(s){var t=this,a=!0;return this.nextCallback=function(r){a&&(a=!1,t.nextCallback=null,s(r))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},u.onTransitionEnd=function(s,t){this.setNextCallback(t);var a=this.props.nodeRef?this.props.nodeRef.current:O.findDOMNode(this),r=s==null&&!this.props.addEndListener;if(!a||r){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],l=o[0],d=o[1];this.props.addEndListener(l,d)}s!=null&&setTimeout(this.nextCallback,s)},u.render=function(){var s=this.state.status;if(s===T)return null;var t=this.props,a=t.children;t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef;var r=Z(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return v.createElement(te.Provider,{value:null},typeof a=="function"?a(s,r):v.cloneElement(v.Children.only(a),r))},i}(v.Component);x.contextType=te;x.propTypes={};function C(){}x.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:C,onEntering:C,onEntered:C,onExit:C,onExiting:C,onExited:C};x.UNMOUNTED=T;x.EXITED=E;x.ENTERING=g;x.ENTERED=b;x.EXITING=P;var de=function(i,u){return i&&u&&u.split(" ").forEach(function(e){return le(i,e)})},A=function(i,u){return i&&u&&u.split(" ").forEach(function(e){return ce(i,e)})},L=function(n){ee(i,n);function i(){for(var e,s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];return e=n.call.apply(n,[this].concat(t))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(r,o){var l=e.resolveArguments(r,o),d=l[0],p=l[1];e.removeClasses(d,"exit"),e.addClass(d,p?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(r,o)},e.onEntering=function(r,o){var l=e.resolveArguments(r,o),d=l[0],p=l[1],h=p?"appear":"enter";e.addClass(d,h,"active"),e.props.onEntering&&e.props.onEntering(r,o)},e.onEntered=function(r,o){var l=e.resolveArguments(r,o),d=l[0],p=l[1],h=p?"appear":"enter";e.removeClasses(d,h),e.addClass(d,h,"done"),e.props.onEntered&&e.props.onEntered(r,o)},e.onExit=function(r){var o=e.resolveArguments(r),l=o[0];e.removeClasses(l,"appear"),e.removeClasses(l,"enter"),e.addClass(l,"exit","base"),e.props.onExit&&e.props.onExit(r)},e.onExiting=function(r){var o=e.resolveArguments(r),l=o[0];e.addClass(l,"exit","active"),e.props.onExiting&&e.props.onExiting(r)},e.onExited=function(r){var o=e.resolveArguments(r),l=o[0];e.removeClasses(l,"exit"),e.addClass(l,"exit","done"),e.props.onExited&&e.props.onExited(r)},e.resolveArguments=function(r,o){return e.props.nodeRef?[e.props.nodeRef.current,r]:[r,o]},e.getClassNames=function(r){var o=e.props.classNames,l=typeof o=="string",d=l&&o?o+"-":"",p=l?""+d+r:o[r],h=l?p+"-active":o[r+"Active"],N=l?p+"-done":o[r+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:N}},e}var u=i.prototype;return u.addClass=function(s,t,a){var r=this.getClassNames(t)[a+"ClassName"],o=this.getClassNames("enter"),l=o.doneClassName;t==="appear"&&a==="done"&&l&&(r+=" "+l),a==="active"&&s&&ne(s),r&&(this.appliedClasses[t][a]=r,de(s,r))},u.removeClasses=function(s,t){var a=this.appliedClasses[t],r=a.base,o=a.active,l=a.done;this.appliedClasses[t]={},r&&A(s,r),o&&A(s,o),l&&A(s,l)},u.render=function(){var s=this.props;s.classNames;var t=Z(s,["classNames"]);return v.createElement(x,z({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},i}(v.Component);L.defaultProps={classNames:""};L.propTypes={};const se=({children:n,animation:i,classNames:u,in:e=!1,timeout:s=300,appear:t=!0})=>{const a=M.useRef(null);return c.jsx(L,{in:e,timeout:s,classNames:u??i,nodeRef:a,appear:t,mountOnEnter:!1,unmountOnExit:!1,children:c.jsx("div",{ref:a,style:{display:e?void 0:"none"},children:n})})};se.__docgenInfo={description:"",methods:[],displayName:"Transition",props:{animation:{required:!1,tsType:{name:"union",raw:`| "zoom-in-top"
| "zoom-in-left"
| "zoom-in-bottom"
| "zoom-in-right"`,elements:[{name:"literal",value:'"zoom-in-top"'},{name:"literal",value:'"zoom-in-left"'},{name:"literal",value:'"zoom-in-bottom"'},{name:"literal",value:'"zoom-in-right"'}]},description:"动画 class 前缀"},children:{required:!0,tsType:{name:"ReactElement"},description:"子元素，仅支持单一 ReactElement"},in:{defaultValue:{value:"false",computed:!1},required:!1},timeout:{defaultValue:{value:"300",computed:!1},required:!1},appear:{defaultValue:{value:"true",computed:!1},required:!1}},composes:["Omit"]};const I=({index:n,className:i,title:u,children:e})=>{const s=M.useContext($),t=s.defaultOpenSubMenus,a=n&&s.mode==="vertical"?t.includes(n):!1,[r,o]=M.useState(a),l=m=>{m.preventDefault(),o(!r)};let d;const p=(m,w)=>{clearTimeout(d),m.preventDefault(),d=setTimeout(()=>{o(w)},300)},h=s.mode==="vertical"?{onClick:l}:{},N=s.mode!=="vertical"?{onMouseEnter:m=>{p(m,!0)},onMouseLeave:m=>{p(m,!1)}}:{},S=k("menu-item submenu-item",i,{"is-active":s.index===n,"is-opened":r,"is-vertical":s.mode==="vertical"});M.useRef(null);const D=()=>{const m=k("cream-submenu",{"menu-opened":r}),w=v.Children.map(e,(re,ae)=>{const V=re;if(V.type.displayName==="MenuItem")return v.cloneElement(V,{index:`${n}-${ae}`});console.error("Warning: SubMenu has a child which is not a MenuItem component")});return c.jsx(se,{in:r,timeout:300,animation:"zoom-in-top",wrapper:!0,children:c.jsx("ul",{className:m,children:w})})};return c.jsxs("li",{className:S,...N,children:[c.jsxs("div",{className:"submenu-title",...h,children:[u,c.jsx(ie,{icon:oe,className:"arrow-icon"})]}),D()]},n)};I.displayName="SubMenu";I.__docgenInfo={description:"",methods:[],displayName:"SubMenu",props:{index:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Ee={title:"Menu",component:y,tags:["autodocs"],subcomponents:{Submenu:I},argTypes:{mode:{control:{type:"radio"},options:["horizontal","vertical"]},defaultIndex:{control:"text"},defaultOpenSubMenus:{control:"object"}}},j={args:{mode:"horizontal",defaultIndex:"0"},render:n=>c.jsxs(y,{...n,children:[c.jsx(f,{children:"Menu Item 1"}),c.jsx(f,{children:"Menu Item 2"}),c.jsxs(I,{title:"SubMenu",children:[c.jsx(f,{children:"Sub Item 1"}),c.jsx(f,{children:"Sub Item 2"})]})]})},R={args:{mode:"vertical",defaultIndex:"0"},render:n=>c.jsxs(y,{...n,children:[c.jsx(f,{children:"Menu Item 1"}),c.jsx(f,{children:"Menu Item 2"}),c.jsxs(I,{title:"SubMenu",children:[c.jsx(f,{children:"Sub Item 1"}),c.jsx(f,{children:"Sub Item 2"})]})]})},_={args:{mode:"vertical",defaultIndex:"0",defaultOpenSubMenus:["2"]},render:n=>c.jsxs(y,{...n,children:[c.jsx(f,{children:"Menu Item 1"}),c.jsx(f,{children:"Menu Item 2"}),c.jsxs(I,{title:"SubMenu",children:[c.jsx(f,{children:"Sub Item 1"}),c.jsx(f,{children:"Sub Item 2"})]})]})};var W,X,H;j.parameters={...j.parameters,docs:{...(W=j.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    mode: "horizontal",
    defaultIndex: "0"
  },
  render: args => <Menu {...args}>
      <MenuItem>Menu Item 1</MenuItem>
      <MenuItem>Menu Item 2</MenuItem>
      <SubMenu title="SubMenu">
        <MenuItem>Sub Item 1</MenuItem>
        <MenuItem>Sub Item 2</MenuItem>
      </SubMenu>
    </Menu>
}`,...(H=(X=j.parameters)==null?void 0:X.docs)==null?void 0:H.source}}};var F,B,J;R.parameters={...R.parameters,docs:{...(F=R.parameters)==null?void 0:F.docs,source:{originalSource:`{
  args: {
    mode: "vertical",
    defaultIndex: "0"
  },
  render: args => <Menu {...args}>
      <MenuItem>Menu Item 1</MenuItem>
      <MenuItem>Menu Item 2</MenuItem>
      <SubMenu title="SubMenu">
        <MenuItem>Sub Item 1</MenuItem>
        <MenuItem>Sub Item 2</MenuItem>
      </SubMenu>
    </Menu>
}`,...(J=(B=R.parameters)==null?void 0:B.docs)==null?void 0:J.source}}};var K,Q,Y;_.parameters={..._.parameters,docs:{...(K=_.parameters)==null?void 0:K.docs,source:{originalSource:`{
  args: {
    mode: "vertical",
    defaultIndex: "0",
    defaultOpenSubMenus: ["2"] // 假设 SubMenu 的 index 是 2
  },
  render: args => <Menu {...args}>
      <MenuItem>Menu Item 1</MenuItem>
      <MenuItem>Menu Item 2</MenuItem>
      <SubMenu title="SubMenu">
        <MenuItem>Sub Item 1</MenuItem>
        <MenuItem>Sub Item 2</MenuItem>
      </SubMenu>
    </Menu>
}`,...(Y=(Q=_.parameters)==null?void 0:Q.docs)==null?void 0:Y.source}}};const ge=["Horizontal","Vertical","VerticalWithDefaultOpen"];export{j as Horizontal,R as Vertical,_ as VerticalWithDefaultOpen,ge as __namedExportsOrder,Ee as default};
